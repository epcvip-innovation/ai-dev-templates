# Cross-Repo Playwright Audit — February 2026

**Date:** 2026-02-13
**Scope:** All 24 repos under `~/repos-epcvip/`
**Author:** Claude Code + Human

---

## Executive Summary

- **4 of 24 repos** have Playwright installed (fwaptile-wordle, epcvip-tools-hub, shared-markdown fork, competitor-analyzer)
- **19 test files**, ~3,467 lines of test code total
- Playwright version consistent at `^1.57.0` across all repos
- **Zero repos** run Playwright in CI pipelines
- Significant `.mcp.json` inconsistencies across repos (now standardized — see Part 4)

### Key Findings

1. **MCP configs were inconsistent** — missing `-y`, `--no-sandbox`, `"type": "stdio"` across repos
2. **Only 1 repo** (fwaptile-wordle) uses the `BASE_URL` env var pattern for flexible test targeting
3. **No CI E2E** — all repos with Playwright only run tests locally
4. **3 repos should add Playwright** — docs-site, epcvip-admin, funnel-step-lab

---

## Per-Repo Breakdown

### 1. fwaptile-wordle

| Aspect | Details |
|--------|---------|
| **Location** | `utilities/fwaptile-wordle/` |
| **Playwright Version** | `^1.57.0` |
| **Test Files** | 11 specs in `server/test/e2e/` |
| **Test Lines** | ~3,051 lines |
| **Config** | `server/playwright.config.ts` — uses `BASE_URL` env var (best practice) |
| **CI** | Jest unit tests only, no E2E in CI |
| **npm Scripts** | `test:e2e`, `test:e2e:headed`, `test:e2e:debug` |

**.mcp.json (before fix):**
```json
{ "args": ["@playwright/mcp@latest"] }
```
- Missing `-y` (npx auto-confirm)
- Missing `--no-sandbox` (required for WSL2)

**.mcp.json (after fix):**
```json
{ "args": ["-y", "@playwright/mcp@latest", "--no-sandbox"] }
```

**Config highlights:**
- `BASE_URL` env var support — can target localhost or production
- Conditional `webServer` — only starts dev server when targeting localhost
- Visual regression settings with `maxDiffPixels: 100`
- Chromium + mobile (iPhone 13) projects

**Other issues:**
- Neon API key hardcoded in `.mcp.json` — should be in env vars or `.env`

---

### 2. epcvip-tools-hub

| Aspect | Details |
|--------|---------|
| **Location** | `utilities/epcvip-tools-hub/` |
| **Playwright Version** | `^1.57.0` |
| **Test Files** | 3 specs in `server/test/e2e/` |
| **Test Lines** | ~416 lines |
| **Config** | `server/playwright.config.ts` — hardcoded port (now updated) |
| **CI** | Lint + build only, no E2E |

**.mcp.json:** Already correct — has `-y`, `--no-sandbox`, `"type": "stdio"`.

**Config (before fix):**
```typescript
baseURL: 'http://localhost:2567',
webServer: { command: 'cd server && npm start', ... }
```

**Config (after fix):**
```typescript
const baseURL = process.env.BASE_URL || 'http://localhost:2567';
const isLocalhost = baseURL.includes('localhost');
// webServer conditional on isLocalhost
```

---

### 3. shared-markdown (fork)

| Aspect | Details |
|--------|---------|
| **Location** | Fork of epcvip-tools-hub markdown components |
| **Playwright Version** | `^1.57.0` |
| **Test Files** | Copy of epcvip-tools-hub tests |
| **Config** | Copy of epcvip-tools-hub config |
| **CI** | Copy of epcvip-tools-hub CI |

**Notes:** This is a fork/copy of epcvip-tools-hub's Playwright setup. Inherits the same issues and fixes.

---

### 4. competitor-analyzer

| Aspect | Details |
|--------|---------|
| **Location** | `utilities/competitor-analyzer/` |
| **Playwright Version** | Via MCP only (no `@playwright/test` dependency) |
| **Test Files** | 0 — MCP-only usage for funnel analysis |
| **Config** | No `playwright.config.ts` |
| **CI** | None |

**.mcp.json (before fix):**
```json
{ "args": ["@playwright/mcp@latest", "--save-video", "1280x720"] }
```
- Missing `-y` (npx auto-confirm)
- Missing `--no-sandbox` (required for WSL2)
- Missing `"type": "stdio"`

**.mcp.json (after fix):**
```json
{
  "type": "stdio",
  "args": ["-y", "@playwright/mcp@latest", "--no-sandbox", "--save-video", "1280x720"]
}
```

---

## Inconsistency Matrix

### `.mcp.json` Flag Differences (Before Fixes)

| Flag | fwaptile-wordle | epcvip-tools-hub | shared-markdown | competitor-analyzer |
|------|:-:|:-:|:-:|:-:|
| `-y` (auto-confirm) | — | Yes | Yes | — |
| `--no-sandbox` (WSL2) | — | Yes | Yes | — |
| `"type": "stdio"` | Yes | Yes | Yes | — |
| `--save-video` | — | — | — | Yes |

### Config Pattern Differences (Before Fixes)

| Pattern | fwaptile-wordle | epcvip-tools-hub | shared-markdown | competitor-analyzer |
|---------|:-:|:-:|:-:|:-:|
| `BASE_URL` env var | Yes | — | — | N/A |
| Conditional `webServer` | Yes | — | — | N/A |
| Visual regression config | Yes | — | — | N/A |
| Mobile project | Yes | Yes | Yes | N/A |

### CI E2E Status

| Repo | Unit Tests in CI | E2E Tests in CI | Visual Regression in CI |
|------|:-:|:-:|:-:|
| fwaptile-wordle | Yes (Jest) | — | — |
| epcvip-tools-hub | Yes (Jest) | — | — |
| shared-markdown | Yes | — | — |
| competitor-analyzer | — | — | — |

---

## Standardization Applied (2026-02-13)

### Production Fixes Made

| Repo | File | Change |
|------|------|--------|
| fwaptile-wordle | `.mcp.json` | Added `-y`, `--no-sandbox` |
| competitor-analyzer | `.mcp.json` | Added `-y`, `--no-sandbox`, `"type": "stdio"` |
| epcvip-tools-hub | `playwright.config.ts` | Added `BASE_URL` env var, conditional `webServer` |
| epcvip-tools-hub | `.mcp.json` | Already correct — no changes needed |

### Standard `.mcp.json` Template

See [examples/mcp.json.template](./examples/mcp.json.template) for the canonical config.

Required flags for all repos:
- `-y` — auto-confirm npx
- `--no-sandbox` — required for WSL2/Linux
- `"type": "stdio"` — explicit transport type

---

## Repos That Should Add Playwright

### High Priority

| Repo | Reason | Complexity |
|------|--------|------------|
| **docs-site** | Has web UI, serves interactive tools, no tests at all | Medium — multiple routes to test |
| **epcvip-admin** | Has auth flows, user management, role-based access | High — auth testing patterns needed |

### Medium Priority

| Repo | Reason | Complexity |
|------|--------|------------|
| **funnel-step-lab** | Interactive prototyping tool, visual verification valuable | Low — mostly UI state |
| **experiments-dashboard** | Data display, filtering, sorting | Medium — needs mock data |

### Low Priority (MCP-Only Candidates)

| Repo | Reason |
|------|--------|
| **ping-tree-compare** | File upload + diff view, MCP for visual verification |
| **athena-usage-monitor** | Dashboard charts, MCP for spot-checking |

---

## Recommendations

### Immediate (Done)
1. ~~Standardize `.mcp.json` across all repos~~ — Completed 2026-02-13
2. ~~Add `BASE_URL` pattern to epcvip-tools-hub~~ — Completed 2026-02-13
3. ~~Create standardized `.mcp.json` template~~ — See `examples/mcp.json.template`

### Short-Term (Next 2 Weeks)
4. Add basic smoke tests to `docs-site` (highest-value addition)
5. Add auth flow tests to `epcvip-admin`
6. Evaluate Playwright CLI as lighter alternative to MCP for CI

### Medium-Term (Next Month)
7. Add Playwright to CI pipelines (start with fwaptile-wordle as pilot)
8. Establish visual regression baselines for fwaptile-wordle
9. Create shared test utilities package for common patterns

### Long-Term (Quarterly)
10. Evaluate Playwright Agents when they reach stable release
11. Consider Haiku 4.5 for automated CI QA (3x cheaper than Sonnet)

---

## Appendix: Raw Data Collection

### File Counts by Repo

```
fwaptile-wordle/server/test/e2e/
  ├── accessibility.spec.ts
  ├── daily-challenge.spec.ts
  ├── fixtures.ts
  ├── game-flow.spec.ts
  ├── gauntlet.spec.ts
  ├── historical-dailies.spec.ts
  ├── multiplayer.spec.ts
  ├── pages/ (Page Objects)
  ├── room-management.spec.ts
  ├── stats.spec.ts
  ├── visual.spec.ts
  └── wordle-core.spec.ts

epcvip-tools-hub/server/test/e2e/
  ├── fixtures.ts
  ├── hub-navigation.spec.ts
  ├── pages/
  └── visual.spec.ts
```

---

## See Also

- [examples/mcp.json.template](./examples/mcp.json.template) — Canonical MCP config (standardized in this audit)
- [PLAYWRIGHT_CLAUDE_GUIDE.md](./PLAYWRIGHT_CLAUDE_GUIDE.md) — Correct setup for new repos
- [BROWSER_AUTOMATION_LANDSCAPE_2026.md](./BROWSER_AUTOMATION_LANDSCAPE_2026.md) — Platform compatibility matrix
- [STATUS.md](./STATUS.md) — Verification state of this audit

---

*Last Updated: 2026-02-13*
